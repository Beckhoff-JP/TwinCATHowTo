# Power shellを用いたシステムレイテンシ計測

システムの可用性を評価する方法にはさまざまな方法があります。TwinCATでは、特にEtherCAT のI/O制御に至るまでのリアルタイム性能が維持できているかを測る指標としてレイテンシ値を計測することができます。この値を長期的に計測することでシステムが安定稼働できているか評価することが重要となります。

本章では、その簡易的な手法としてPower shellのスクリプトを用いてログを記録する手順を示します。

ここで計測できるレイテンシ値は、 "Max latency" と呼ばれるもので、TwinCATがConfiguration modeからRun modeへ移行して以来、最大値を更新した値を保持するものとなっています。

一定の周期でIPC上の各リアルタイムコアの最大レイテンシの変化トレンドをCSVファイルに記録することができるため、どのタイミング（時刻）でレイテンシのピークを迎えたのかを判別することで問題の要因を特定することができます。

```{toctree}
:hidden:

latency.md
```
